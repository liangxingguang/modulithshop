import{s as w,g as P,u as U,e as V,f as T,o as M,i as N,t as q,U as R,$ as z,O as j,n as H,p as _,v as b,x as u,A as t,y as r,z as s,F as $,C as I,I as E,K,D as d,E as C}from"./index-78223f15.js";import{E as O}from"./pagination-fbb635bb.js";/* empty css              */import"./tag-c15f0a42.js";import"./select-0ae9fab1.js";import"./scrollbar-afb507b1.js";import"./popper-7ac694e5.js";import{E as G}from"./empty-2b4f8712.js";import{d as J,a as Q,b as W}from"./main-0e4d3339.js";import{_ as X}from"./MsActivityTag-6c173f29.js";import{E as Y}from"./image-viewer-32b8c113.js";import{E as Z}from"./row-4e1462a5.js";import{E as x}from"./col-4143b604.js";/* empty css               */import{i as ee,b as te}from"./order-2615b0b0.js";import{S as ae}from"./index-97ee7e1c.js";import{f as se,h as ne}from"./helper-16193b38.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import"./isEqual-528f6bc1.js";import"./_Uint8Array-e95ddee1.js";import"./strings-4bc551b5.js";import"./debounce-429b1daa.js";import"./_baseIteratee-58952620.js";import"./hasIn-61fe7d07.js";import"./index-b0526b91.js";import"./isUndefined-aa0326a0.js";import"./constants-2604e35b.js";import"./dayjs.min-31f5447d.js";const re={components:{Search:w},setup(){const e=P(),a=U(),F=V(),n="small";let g=T({returnOrderList:[],loading:!1,isdata:!0,all:0,pay:0,confirm:0,close:0,order_id:""}),p=T({return_state_id:0,return_channel_code:"",page:parseInt(F.query.page)||1,size:parseInt(F.query.size)||10,total:1}),i=()=>{g.loading=!0;let l={page:p.page,size:p.size};p.return_channel_code&&(l.return_channel_code=p.return_channel_code),p.return_state_id&&(l.return_state_id=p.return_state_id),ee(l).then(y=>{if(y.status==200){let m=y.data;g.returnOrderList=m.items,p.total=m.records,m.items.length>0?g.isdata=!0:g.isdata=!1}else R.error(z("获取数据失败"));g.loading=!1})},c=()=>{let l={page:p.page,size:p.size};a.push({path:"/user/return/index",query:l})},k=()=>{i()},B=l=>{p.return_state_id=l,i()},S=l=>{p.return_channel_code=l,i()},h=l=>ne.format(l);const D=l=>{j.confirm(z("确定取消退单吗?"),{confirmButtonText:z("确定"),cancelButtonText:z("取消"),center:!0}).then(()=>{te({return_id:l}).then(m=>{m.status==200?(R.success(z("售后订单已成功取消!")),i()):R.error(m.msg)})})};M((l,y)=>{i()});const A=l=>{const y=e.info.return_state_list.find(m=>m.value===l);return y?y.label:""};return N(()=>{i()}),{getLists:i,goTo:c,dateFormat:h,buttonSize:n,checkReturnStatus:B,formatDateOneTime:se,checkApplicationId:k,checkChannelCode:S,cancelReturnOrder:D,getLabelByValue:A,StateCode:ae,...q(g),...q(p)}}};const ie={class:"right-title-box"},ue={class:"first-title"},le={class:"order-container"},de={class:"select-box"},pe={class:"title-btn-box"},_e={class:"select-title"},ce={class:"title-btn-box"},me={class:"select-title"},fe={key:0},ye={class:"order-number"},ge={class:"order-number"},be={class:"time"},Ee={class:"p-name"},he={class:"sku-name"},ze={class:"quantity-price"},Ce={class:"order-text"},ke={class:"order-text"},ve={key:1},Fe={class:"sortPagiBar"},Be={class:"bottom-pagination"};function Se(e,a,F,n,g,p){const i=K,c=x,k=Z,B=J,S=Y,h=H("router-link"),D=X,A=Q,l=W,y=G,m=O;return _(),b($,null,[u("div",ie,[u("div",ue,t(e.$t("售后订单")),1)]),u("div",le,[u("div",de,[u("div",pe,[u("span",_e,t(e.$t("退款渠道")),1),r(i,{class:"select-btn",type:e.return_channel_code?"":"primary",size:n.buttonSize,onClick:a[0]||(a[0]=o=>n.checkChannelCode())},{default:s(()=>[d(t(e.$t("全部")),1)]),_:1},8,["type","size"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[1]||(a[1]=o=>n.checkChannelCode("money")),type:e.return_channel_code=="money"?"primary":""},{default:s(()=>[d(t(e.$t("余额")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[2]||(a[2]=o=>n.checkChannelCode("alipay")),type:e.return_channel_code=="alipay"?"primary":""},{default:s(()=>[d(t(e.$t("支付宝")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[3]||(a[3]=o=>n.checkChannelCode("wx_native")),type:e.return_channel_code=="wx_native"?"primary":""},{default:s(()=>[d(t(e.$t("微信")),1)]),_:1},8,["size","type"])]),u("div",ce,[u("span",me,t(e.$t("售后状态")),1),r(i,{class:"select-btn",type:e.return_state_id==0?"primary":"",size:n.buttonSize,onClick:a[4]||(a[4]=o=>n.checkReturnStatus(0))},{default:s(()=>[d(t(e.$t("全部订单")),1)]),_:1},8,["type","size"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[5]||(a[5]=o=>n.checkReturnStatus(3105)),type:e.return_state_id==3105?"primary":""},{default:s(()=>[d(t(e.$t("退单审核")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[6]||(a[6]=o=>n.checkReturnStatus(3110)),type:e.return_state_id==3110?"primary":""},{default:s(()=>[d(t(e.$t("收货确认")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[7]||(a[7]=o=>n.checkReturnStatus(3125)),type:e.return_state_id==3125?"primary":""},{default:s(()=>[d(t(e.$t("售后完成")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[8]||(a[8]=o=>n.checkReturnStatus(3130)),type:e.return_state_id==3130?"primary":""},{default:s(()=>[d(t(e.$t("商家拒绝")),1)]),_:1},8,["size","type"]),r(i,{class:"select-btn",size:n.buttonSize,onClick:a[9]||(a[9]=o=>n.checkReturnStatus(3135)),type:e.return_state_id==3135?"primary":""},{default:s(()=>[d(t(e.$t("已取消")),1)]),_:1},8,["size","type"])])]),r(k,{class:"table-header"},{default:s(()=>[r(c,{span:11,class:"table-head-text"},{default:s(()=>[d(t(e.$t("商品信息")),1)]),_:1}),r(c,{span:3,class:"table-head-text"},{default:s(()=>[d(t(e.$t("退款金额")),1)]),_:1}),r(c,{span:6,class:"table-head-text"},{default:s(()=>[d(t(e.$t("售后状态")),1)]),_:1}),r(c,{span:4,class:"table-head-text"},{default:s(()=>[d(t(e.$t("操作")),1)]),_:1})]),_:1}),e.isdata?(_(),b("div",fe,[(_(!0),b($,null,I(e.returnOrderList,(o,L)=>(_(),b("div",{key:L,class:"order-table-box"},[r(l,null,{default:s(()=>[r(B,{class:"order-header-info"},{default:s(()=>[u("span",ye,t(e.$t("退单号："))+" "+t(o.return_id),1),u("span",ge,t(e.$t("订单号："))+" "+t(o.order_id),1),u("span",be,t(e.$t("申请时间："))+" "+t(n.formatDateOneTime(o.return_add_time)),1)]),_:2},1024),r(A,{class:"order-list-info"},{default:s(()=>[(_(!0),b($,null,I(o.items,(f,v)=>(_(),b("ul",{key:v},[r(k,null,{default:s(()=>[r(c,{span:4,class:"img-box"},{default:s(()=>[r(h,{to:{path:"/product/detail",query:{item_id:f.item_id}}},{default:s(()=>[r(S,{src:f.order_item_image,"object-fit":"cover",style:{width:"120px",height:"120px"},alt:f.item_name},null,8,["src","alt"])]),_:2},1032,["to"])]),_:2},1024),r(c,{span:7},{default:s(()=>[r(h,{to:{path:"/product/detail",query:{item_id:f.item_id}}},{default:s(()=>[u("div",Ee,[f.activity_type_id?(_(),E(D,{key:0,typeId:f.activity_type_id},null,8,["typeId"])):C("",!0),d(" "+t(f.product_name),1)]),u("div",he,t(e.$t("规格"))+"："+t(f.item_name),1)]),_:2},1032,["to"]),u("div",ze,t(e.$t("￥"))+t(f.item_unit_price)+" x "+t(f.order_item_quantity),1)]),_:2},1024),v==0?(_(),E(c,{key:0,span:3},{default:s(()=>[u("div",Ce,t(e.$t("￥"))+t(o.return_refund_amount),1)]),_:2},1024)):C("",!0),v==0?(_(),E(c,{key:1,span:6},{default:s(()=>[u("div",ke,t(n.getLabelByValue(o.return_state_id)),1)]),_:2},1024)):C("",!0),v==0?(_(),E(c,{key:2,span:4,class:"order-actions"},{default:s(()=>[r(h,{to:{path:"/user/return/get",query:{return_id:o.return_id}}},{default:s(()=>[r(i,{size:"small",style:{color:"#000","margin-bottom":"10px"}},{default:s(()=>[d(t(e.$t("售后详情")),1)]),_:1})]),_:2},1032,["to"]),o.return_state_id==n.StateCode.RETURN_PROCESS_CHECK?(_(),E(i,{key:0,type:"danger",size:"small",style:{color:"white"},onClick:De=>n.cancelReturnOrder(o.return_id)},{default:s(()=>[d(t(e.$t("取消退单")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)):C("",!0)]),_:2},1024)]))),128))]),_:2},1024)]),_:2},1024)]))),128))])):(_(),b("div",ve,[r(y,{description:e.$t("对不起，没有找到你需要的售后订单")},null,8,["description"])])),u("div",Fe,[u("div",Be,[u("nav",null,[(_(),E(m,{currentPage:e.page,"onUpdate:currentPage":a[10]||(a[10]=o=>e.page=o),"page-size":e.size,"onUpdate:pageSize":a[11]||(a[11]=o=>e.size=o),"page-sizes":[10,20,30,40],small:!1,disabled:!1,background:!0,layout:"prev,pager,next,total,jumper",total:e.total,key:e.page,onSizeChange:a[12]||(a[12]=o=>{e.size=o,n.goTo()}),onCurrentChange:a[13]||(a[13]=o=>{e.page=o,n.goTo()})},null,8,["currentPage","page-size","total"]))])])])])],64)}const st=oe(re,[["render",Se],["__scopeId","data-v-ba55aabe"]]);export{st as default};
