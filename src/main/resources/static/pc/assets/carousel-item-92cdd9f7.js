import{aC as ce,aJ as Me,bP as $e,r as y,a7 as O,aU as e,aS as G,b7 as Ae,i as fe,b$ as He,bh as Le,bQ as Be,aI as Pe,c0 as Oe,co as Ve,b0 as ve,Q as x,aO as me,p as H,v as R,x as Z,I as ne,z as q,P as X,G as L,aW as J,y as K,J as le,bt as ze,Z as Y,ao as re,E as Q,b as Re,ba as de,H as he,F as De,C as Ue,A as We,aX as pe,bG as Fe,f as je,a4 as Ge,cB as Je,b1 as Ke,c5 as Qe}from"./index-78223f15.js";import{u as Xe}from"./index-089c6298.js";import{t as ie}from"./image-viewer-32b8c113.js";const Ye=ce({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Ze={change:(a,B)=>[a,B].every(Me)},ge=Symbol("carouselContextKey"),ue=300,qe=(a,B,i)=>{const{children:o,addChild:k,removeChild:C}=Xe(ve(),"ElCarouselItem"),M=$e(),s=y(-1),d=y(null),w=y(!1),h=y(),_=y(0),b=y(!0),E=O(()=>a.arrow!=="never"&&!e(p)),S=O(()=>o.value.some(t=>t.props.label.toString().length>0)),$=O(()=>a.type==="card"),p=O(()=>a.direction==="vertical"),A=O(()=>a.height!=="auto"?{height:a.height}:{height:`${_.value}px`,overflow:"hidden"}),D=ie(t=>{f(t)},ue,{trailing:!0}),U=ie(t=>{ee(t)},ue),n=t=>b.value?s.value<=1?t<=1:t>1:!0;function l(){d.value&&(clearInterval(d.value),d.value=null)}function c(){a.interval<=0||!a.autoplay||d.value||(d.value=setInterval(()=>m(),a.interval))}const m=()=>{s.value<o.value.length-1?s.value=s.value+1:a.loop&&(s.value=0)};function f(t){if(Pe(t)){const z=o.value.filter(P=>P.props.name===t);z.length>0&&(t=o.value.indexOf(z[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=o.value.length,T=s.value;t<0?s.value=a.loop?u-1:0:t>=u?s.value=a.loop?0:u-1:s.value=t,T===s.value&&r(T),ae()}function r(t){o.value.forEach((u,T)=>{u.translateItem(T,s.value,t)})}function N(t,u){var T,z,P,F;const j=e(o),se=j.length;if(se===0||!t.states.inStage)return!1;const Se=u+1,ke=u-1,oe=se-1,_e=j[oe].states.active,Ee=j[0].states.active,Ne=(z=(T=j[Se])==null?void 0:T.states)==null?void 0:z.active,Te=(F=(P=j[ke])==null?void 0:P.states)==null?void 0:F.active;return u===oe&&Ee||Ne?"left":u===0&&_e||Te?"right":!1}function W(){w.value=!0,a.pauseOnHover&&l()}function g(){w.value=!1,c()}function v(t){e(p)||o.value.forEach((u,T)=>{t===N(u,T)&&(u.states.hover=!0)})}function I(){e(p)||o.value.forEach(t=>{t.states.hover=!1})}function V(t){s.value=t}function ee(t){a.trigger==="hover"&&t!==s.value&&(s.value=t)}function ye(){f(s.value-1)}function Ce(){f(s.value+1)}function ae(){l(),a.pauseOnHover||c()}function be(t){a.height==="auto"&&(_.value=t)}function we(){var t;const u=(t=M.default)==null?void 0:t.call(M);if(!u)return null;const T=Oe(u),z="ElCarouselItem",P=T.filter(F=>Ve(F)&&F.type.name===z);return(P==null?void 0:P.length)===2&&a.loop&&!$.value?(b.value=!0,P):(b.value=!1,null)}G(()=>s.value,(t,u)=>{r(u),b.value&&(t=t%2,u=u%2),u>-1&&B("change",t,u)}),G(()=>a.autoplay,t=>{t?c():l()}),G(()=>a.loop,()=>{f(s.value)}),G(()=>a.interval,()=>{ae()});const te=Ae();return fe(()=>{G(()=>o.value,()=>{o.value.length>0&&f(a.initialIndex)},{immediate:!0}),te.value=He(h.value,()=>{r()}),c()}),Le(()=>{l(),h.value&&te.value&&te.value.stop()}),Be(ge,{root:h,isCardType:$,isVertical:p,items:o,loop:a.loop,addItem:k,removeItem:C,setActiveItem:f,setContainerHeight:be}),{root:h,activeIndex:s,arrowDisplay:E,hasLabel:S,hover:w,isCardType:$,items:o,isVertical:p,containerStyle:A,isItemsTwoLength:b,handleButtonEnter:v,handleButtonLeave:I,handleIndicatorClick:V,handleMouseEnter:W,handleMouseLeave:g,setActiveItem:f,prev:ye,next:Ce,PlaceholderItem:we,isTwoLengthShow:n,throttledArrowClick:D,throttledIndicatorHover:U}},xe=["onMouseenter","onClick"],et={key:0},tt="ElCarousel",at=x({name:tt}),st=x({...at,props:Ye,emits:Ze,setup(a,{expose:B,emit:i}){const o=a,{root:k,activeIndex:C,arrowDisplay:M,hasLabel:s,hover:d,isCardType:w,items:h,isVertical:_,containerStyle:b,handleButtonEnter:E,handleButtonLeave:S,handleIndicatorClick:$,handleMouseEnter:p,handleMouseLeave:A,setActiveItem:D,prev:U,next:n,PlaceholderItem:l,isTwoLengthShow:c,throttledArrowClick:m,throttledIndicatorHover:f}=qe(o,i),r=me("carousel"),N=O(()=>{const g=[r.b(),r.m(o.direction)];return e(w)&&g.push(r.m("card")),g}),W=O(()=>{const g=[r.e("indicators"),r.em("indicators",o.direction)];return e(s)&&g.push(r.em("indicators","labels")),o.indicatorPosition==="outside"&&g.push(r.em("indicators","outside")),e(_)&&g.push(r.em("indicators","right")),g});return B({setActiveItem:D,prev:U,next:n}),(g,v)=>(H(),R("div",{ref_key:"root",ref:k,class:L(e(N)),onMouseenter:v[6]||(v[6]=J((...I)=>e(p)&&e(p)(...I),["stop"])),onMouseleave:v[7]||(v[7]=J((...I)=>e(A)&&e(A)(...I),["stop"]))},[Z("div",{class:L(e(r).e("container")),style:he(e(b))},[e(M)?(H(),ne(re,{key:0,name:"carousel-arrow-left",persisted:""},{default:q(()=>[X(Z("button",{type:"button",class:L([e(r).e("arrow"),e(r).em("arrow","left")]),onMouseenter:v[0]||(v[0]=I=>e(E)("left")),onMouseleave:v[1]||(v[1]=(...I)=>e(S)&&e(S)(...I)),onClick:v[2]||(v[2]=J(I=>e(m)(e(C)-1),["stop"]))},[K(e(le),null,{default:q(()=>[K(e(ze))]),_:1})],34),[[Y,(g.arrow==="always"||e(d))&&(o.loop||e(C)>0)]])]),_:1})):Q("v-if",!0),e(M)?(H(),ne(re,{key:1,name:"carousel-arrow-right",persisted:""},{default:q(()=>[X(Z("button",{type:"button",class:L([e(r).e("arrow"),e(r).em("arrow","right")]),onMouseenter:v[3]||(v[3]=I=>e(E)("right")),onMouseleave:v[4]||(v[4]=(...I)=>e(S)&&e(S)(...I)),onClick:v[5]||(v[5]=J(I=>e(m)(e(C)+1),["stop"]))},[K(e(le),null,{default:q(()=>[K(e(Re))]),_:1})],34),[[Y,(g.arrow==="always"||e(d))&&(o.loop||e(C)<e(h).length-1)]])]),_:1})):Q("v-if",!0),K(e(l)),de(g.$slots,"default")],6),g.indicatorPosition!=="none"?(H(),R("ul",{key:0,class:L(e(W))},[(H(!0),R(De,null,Ue(e(h),(I,V)=>X((H(),R("li",{key:V,class:L([e(r).e("indicator"),e(r).em("indicator",g.direction),e(r).is("active",V===e(C))]),onMouseenter:ee=>e(f)(V),onClick:J(ee=>e($)(V),["stop"])},[Z("button",{class:L(e(r).e("button"))},[e(s)?(H(),R("span",et,We(I.props.label),1)):Q("v-if",!0)],2)],42,xe)),[[Y,e(c)(V)]])),128))],2)):Q("v-if",!0)],34))}});var ot=pe(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const nt=ce({name:{type:String,default:""},label:{type:[String,Number],default:""}}),lt=(a,B)=>{const i=Fe(ge),o=ve(),k=.83,C=y(),M=y(!1),s=y(0),d=y(1),w=y(!1),h=y(!1),_=y(!1),b=y(!1),{isCardType:E,isVertical:S}=i;function $(n,l,c){const m=c-1,f=l-1,r=l+1,N=c/2;return l===0&&n===m?-1:l===m&&n===0?c:n<f&&l-n>=N?c+1:n>r&&n-l>=N?-2:n}function p(n,l){var c,m;const f=e(S)?((c=i.root.value)==null?void 0:c.offsetHeight)||0:((m=i.root.value)==null?void 0:m.offsetWidth)||0;return _.value?f*((2-k)*(n-l)+1)/4:n<l?-(1+k)*f/4:(3+k)*f/4}function A(n,l,c){const m=i.root.value;return m?((c?m.offsetHeight:m.offsetWidth)||0)*(n-l):0}const D=(n,l,c)=>{var m;const f=e(E),r=(m=i.items.value.length)!=null?m:Number.NaN,N=n===l;!f&&!Je(c)&&(b.value=N||n===c),!N&&r>2&&i.loop&&(n=$(n,l,r));const W=e(S);w.value=N,f?(_.value=Math.round(Math.abs(n-l))<=1,s.value=p(n,l),d.value=e(w)?1:k):s.value=A(n,l,W),h.value=!0,N&&C.value&&i.setContainerHeight(C.value.offsetHeight)};function U(){if(i&&e(E)){const n=i.items.value.findIndex(({uid:l})=>l===o.uid);i.setActiveItem(n)}}return fe(()=>{i.addItem({props:a,states:je({hover:M,translate:s,scale:d,active:w,ready:h,inStage:_,animating:b}),uid:o.uid,translateItem:D})}),Ge(()=>{i.removeItem(o.uid)}),{carouselItemRef:C,active:w,animating:b,hover:M,inStage:_,isVertical:S,translate:s,isCardType:E,scale:d,ready:h,handleItemClick:U}},rt=x({name:"ElCarouselItem"}),it=x({...rt,props:nt,setup(a){const B=a,i=me("carousel"),{carouselItemRef:o,active:k,animating:C,hover:M,inStage:s,isVertical:d,translate:w,isCardType:h,scale:_,ready:b,handleItemClick:E}=lt(B),S=O(()=>{const p=`${`translate${e(d)?"Y":"X"}`}(${e(w)}px)`,A=`scale(${e(_)})`;return{transform:[p,A].join(" ")}});return($,p)=>X((H(),R("div",{ref_key:"carouselItemRef",ref:o,class:L([e(i).e("item"),e(i).is("active",e(k)),e(i).is("in-stage",e(s)),e(i).is("hover",e(M)),e(i).is("animating",e(C)),{[e(i).em("item","card")]:e(h),[e(i).em("item","card-vertical")]:e(h)&&e(d)}]),style:he(e(S)),onClick:p[0]||(p[0]=(...A)=>e(E)&&e(E)(...A))},[e(h)?X((H(),R("div",{key:0,class:L(e(i).e("mask"))},null,2)),[[Y,!e(k)]]):Q("v-if",!0),de($.$slots,"default")],6)),[[Y,e(b)]])}});var Ie=pe(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const vt=Ke(ot,{CarouselItem:Ie}),mt=Qe(Ie);export{mt as E,vt as a};
