import{Q as te,g as A,u as oe,r as g,f as k,$ as l,dO as le,i as re,n as se,p as c,v as C,x as n,aU as e,y as s,z as a,A as d,D as y,I as h,E,G as ae,cw as F,aW as ie,F as ne,ax as M,L as ue,K as de,W as pe,X as _e,U as p,as as ce,aw as me,e4 as fe}from"./index-78223f15.js";import{E as ge}from"./overlay-46bc55b6.js";import{_ as ye}from"./Index-8079ccdd.js";import{E as ve,a as he}from"./form-item-8b9adddb.js";import{E as xe}from"./checkbox-9b81128d.js";import{E as be}from"./image-viewer-32b8c113.js";/* empty css               */import{_ as we}from"./Verify-393aa695.js";/* empty css              */import"./tag-c15f0a42.js";import{a as Ve,E as ke}from"./select-0ae9fab1.js";import"./scrollbar-afb507b1.js";import"./popper-7ac694e5.js";import{h as Ce}from"./helper-16193b38.js";import{_ as Ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./refs-eab7d2f3.js";import"./isUndefined-aa0326a0.js";import"./castArray-c12d26ef.js";import"./_baseClone-95bc8770.js";import"./_Uint8Array-e95ddee1.js";import"./_initCloneObject-cfd68362.js";import"./isEqual-528f6bc1.js";import"./hasIn-61fe7d07.js";import"./flatten-011cba25.js";import"./debounce-429b1daa.js";/* empty css             */import"./strings-4bc551b5.js";import"./_baseIteratee-58952620.js";import"./index-b0526b91.js";import"./dayjs.min-31f5447d.js";const R=b=>(pe("data-v-414b2ff2"),b=b(),_e(),b),Ue={class:"login-container"},Ie={class:"square"},ze={class:"leftSquare"},Se=["src"],Ae={class:"rightSquare"},Fe=R(()=>n("div",{class:"errors-container"},null,-1)),Me={class:"login-header"},Re={class:"logo"},qe={style:{float:"left","margin-left":"69px"}},Be={style:{float:"right","margin-right":"65px","font-size":"16px"}},De={style:{display:"none"}},Ne={class:"top-right text-left hide",style:{width:"409px"}},je={class:"login-footer text-right hidden"},Le=R(()=>n("div",{class:"info-links"},null,-1)),Oe=te({__name:"register",setup(b){const{afterRegister:q,setLogin:B}=A(),D=A(),N=oe(),j=g(""),v=g(!0),w=g(),U=g(60),_=g(),I=g();let z=g(""),f=g(!1);const t=k({user_account:"",password:"",verify_code:"",district_info:"",ureg_type:1,user_intl:"+86",user_province_id:"",user_city_id:"",user_county_id:"",isAgree:!1,is_verify:!1,rand_key:Math.floor(Math.random()*9e8)+1e8}),L=(r,o,u)=>{o=o+"",o===""?u(new Error(l("请输入账号"))):o.length<3||o.length>30?u(new Error(l("账号长度3 - 30"))):t.ureg_type&&t.ureg_type==1?Ce.tel(o,t.user_intl)?u():u(new Error(l("请输入正确的手机号"))):u()},O=k({user_account:[{required:!0,message:l("请输入账号"),trigger:"change"},{validator:L,trigger:"blur"}],password:[{required:!0,message:l("请输入密码"),trigger:"change"},{min:6,max:15,message:l("密码长度6 - 12"),trigger:"blur"}],verify_code:[{required:!0,message:l("请输入验证码"),trigger:"change"}]});k({});let T=()=>{let r={};if(!t.is_verify){p.error(l("请拖动滑块完成验证"));return}if(t.ureg_type==1){if(!t.user_account){p.error(l("请输入手机号"));return}r.mobile=t.user_intl+t.user_account,ce(r).then(o=>{o.status==200?p.success(l("验证码已经发送成功，请尽快输入验证码!")):p.error(o.msg)})}else if(t.ureg_type==2){if(!t.user_account){p.error(l("请输入邮箱号"));return}r.email=t.user_account,me(r).then(o=>{o.status==200?p.success(l("验证码已经发送成功，请尽快输入验证码!")):(v.value=!0,_.value=0,p.error(o.msg))})}else M({}).then(o=>{if(o.status==200)p.success(l("验证码已经发送成功，请尽快输入验证码!"));else{p.error(o.msg);return}});w.value||(_.value=U.value,v.value=!1,w.value=setInterval(()=>{_.value>0&&_.value<=U.value?(_.value--,console.log("count----",_)):(v.value=!0,clearInterval(w.value),w.value=null)},1e3))};const W=r=>{t.is_verify=r};let $=()=>{if(!t.is_verify){p.error(l("请拖动滑块完成验证"));return}if(!t.isAgree){p.error(l("请先同意用户协议"));return}let r={user_account:t.user_account,password:t.password,verify_code:t.verify_code,bind_type:t.ureg_type,rand_key:t.rand_key};t.ureg_type==1&&(r.user_account=t.user_intl+t.user_account,r.user_mobile=t.user_intl+t.user_account,r.verify_key=t.user_intl+t.user_account,r.user_email=""),fe(r).then(o=>{o.status==200?(q(o.data),B(!0),localStorage.setItem("confirmCompany",1),N.back(-1)):(console.log(l("注册失败")),v.value=!0,_.value=0,p.error(o.msg))})},S=()=>{M({rand_key:t.rand_key}).then(r=>{if(r){let o=new FileReader;o.onload=function(u){z.value=u.target.result},o.readAsDataURL(r)}})};le({config_key:"account_login_bg"}).then(r=>{r.status==200&&(j.value=r.data[0].config_value)});const G=async r=>{r&&await r.validate((o,u)=>{o?($(),console.log(o)):console.log("error submit!",u)})},K=()=>{t.isAgree=!0,f.value=!1};return re(()=>{S()}),(r,o)=>{const u=se("router-link"),x=ue,m=ve,P=Ve,Q=ke,X=we,V=de,H=be,J=xe,Y=he,Z=ye,ee=ge;return c(),C(ne,null,[n("div",null,[n("div",Ue,[n("div",Ie,[n("div",ze,[n("img",{src:e(D).info.account_login_bg,style:{"border-radius":"10px 0px 0px 10px"}},null,8,Se)]),n("div",Ae,[Fe,s(Y,{class:"login-form",ref_key:"ruleFormRef",ref:I,rules:e(O),model:e(t),"label-width":"69px","label-position":"left",onSubmit:o[12]||(o[12]=ie(()=>{},["prevent"]))},{default:a(()=>[n("div",Me,[n("a",Re,[n("span",qe,d(e(l)("新用户注册")),1),n("span",Be,[s(u,{to:{path:"/login/login"}},{default:a(()=>[y(d(e(l)("立即登录")),1)]),_:1})])]),n("p",De,d(e(l)("登录到 ")),1)]),e(t).ureg_type==0?(c(),h(m,{key:0,style:{width:"409px",height:"45px"},label:e(l)(""),prop:"user_account"},{default:a(()=>[s(x,{style:{width:"409px",height:"45px","font-size":"16px"},modelValue:e(t).user_account,"onUpdate:modelValue":o[0]||(o[0]=i=>e(t).user_account=i),placeholder:e(l)("请输入账号")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):e(t).ureg_type==1?(c(),h(m,{key:1,label:e(l)(""),prop:"user_account"},{default:a(()=>[s(x,{style:{width:"409px",height:"45px","font-size":"16px"},modelValue:e(t).user_account,"onUpdate:modelValue":o[2]||(o[2]=i=>e(t).user_account=i),modelModifiers:{number:!0},placeholder:e(l)("请输入手机号"),class:"input-with-select"},{prepend:a(()=>[s(Q,{modelValue:e(t).user_intl,"onUpdate:modelValue":o[1]||(o[1]=i=>e(t).user_intl=i),placeholder:"Select",style:{width:"90px",height:"45px","line-height":"45px"}},{default:a(()=>[s(P,{label:"+86",value:"+86"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):e(t).ureg_type==2?(c(),h(m,{key:2,label:e(l)(""),prop:"user_account"},{default:a(()=>[s(x,{style:{width:"409px",height:"45px","font-size":"16px"},modelValue:e(t).user_account,"onUpdate:modelValue":o[3]||(o[3]=i=>e(t).user_account=i),placeholder:e(l)("请输入电子邮箱")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):E("",!0),s(m,null,{default:a(()=>[s(X,{onUpdate:W,handlerWidth:"74"})]),_:1}),e(t).ureg_type?(c(),h(m,{key:3,class:"verify-code",label:e(l)(""),prop:"verify_code"},{default:a(()=>[s(x,{modelValue:e(t).verify_code,"onUpdate:modelValue":o[4]||(o[4]=i=>e(t).verify_code=i),placeholder:e(l)("请输入验证码"),style:{width:"61%","font-size":"16px"}},null,8,["modelValue","placeholder"]),e(v)?(c(),h(V,{key:0,class:"send-code",onClick:e(T),type:"primary"},{default:a(()=>[y(d(e(l)("发送验证码")),1)]),_:1},8,["onClick"])):(c(),h(V,{key:1,class:"send-code",style:{"background-color":"#f5f5f5",color:"black"}},{default:a(()=>[y(d(e(_))+" s "+d(e(l)("后获取")),1)]),_:1}))]),_:1},8,["label"])):(c(),h(m,{key:4,class:"verify-code",label:e(l)(""),prop:"verify_code"},{default:a(()=>[s(x,{modelValue:e(t).verify_code,"onUpdate:modelValue":o[5]||(o[5]=i=>e(t).verify_code=i),placeholder:e(l)("请输入验证码"),style:{width:"409px","font-size":"16px"}},{append:a(()=>[s(V,{style:{padding:"0",width:"102px",display:"inherit"},onClick:e(S)},{default:a(()=>[s(H,{class:"img-responsive",style:{height:"41px"},src:e(z),lazy:""},null,8,["src"])]),_:1},8,["onClick"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])),s(m,{label:e(l)(""),prop:"password",style:{"margin-top":"-13px"}},{default:a(()=>[s(x,{style:{width:"409px",height:"45px","font-size":"16px","margin-top":"24px"},modelValue:e(t).password,"onUpdate:modelValue":o[6]||(o[6]=i=>e(t).password=i),type:"password",autocomplete:"new-password",placeholder:e(l)("请设置6-12位字母、数字或符号密码")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(m,null,{default:a(()=>[s(V,{type:"primary",size:"large",style:{width:"409px",height:"45px","font-size":"21px"},"native-type":"submit",onClick:o[7]||(o[7]=i=>G(e(I)))},{default:a(()=>[y(d(e(l)("注册")),1)]),_:1})]),_:1}),s(m,{label:"",style:{color:"#fff","margin-bottom":"2px"}},{default:a(()=>[s(J,{label:e(l)("点击注册即代表您同意"),size:"large",modelValue:e(t).isAgree,"onUpdate:modelValue":o[8]||(o[8]=i=>e(t).isAgree=i)},null,8,["label","modelValue"]),n("a",{href:"javascript:void(0);",class:ae({agreement:e(t).isAgree}),title:"用户协议",onClick:o[9]||(o[9]=i=>F(f)?f.value=!0:f=!0)},d(e(l)("《用户服务协议》")),3)]),_:1}),n("div",Ne,[e(t).ureg_type!=1?(c(),C("a",{key:0,href:"javascript:void(0);",class:"mobile",onClick:o[10]||(o[10]=()=>{e(t).ureg_type=1,e(t).user_account="",e(t).password="",e(t).verify_code="",v.value=!0,_.value=0})},d(e(l)("手机注册")),1)):E("",!0),y("    "),e(t).ureg_type!=2?(c(),C("a",{key:1,href:"javascript:void(0);",class:"mobile",onClick:o[11]||(o[11]=()=>{e(t).ureg_type=2,e(t).user_account="",e(t).password="",e(t).verify_code="",v.value=!0,_.value=0})},d(e(l)("电子邮箱注册")),1)):E("",!0)]),n("div",je,[s(u,{to:{path:"/login/findpwd"}},{default:a(()=>[y(d(e(l)("登录遇到问题")),1)]),_:1}),y(" | "),s(u,{to:{path:"/login/login"}},{default:a(()=>[y(d(e(l)("我已注册，现在登录")),1)]),_:1}),Le])]),_:1},8,["rules","model"])])])])]),s(ee,{modelValue:e(f),"onUpdate:modelValue":o[13]||(o[13]=i=>F(f)?f.value=i:f=i),width:"947px",title:e(l)("用户注册协议和隐私政策"),draggable:""},{default:a(()=>[s(Z,{onUpdate:K})]),_:1},8,["modelValue","title"])],64)}}});const vt=Ee(Oe,[["__scopeId","data-v-414b2ff2"]]);export{vt as default};
